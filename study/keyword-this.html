<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>this的用法整理</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/stylesheets/normalize.css">
    <link rel="stylesheet" href="/stylesheets/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/styles_v2.0.css">
  </head>
  <body>
    <section class="blogV2-wrapper">
      <header id="blogV2-head">
        <h1><a href="https://github.com/kmokidd" title="go to kmokidd's github">@kmokidd</a></h1>
        <ul id="blogV2-nav">
          <li class="on"><a href="/index.html">Archives</a></li>
          <li><a href="">Projects-ing</a></li>
          <li><a href="/aboutMe.html">About</a></li>
          <li><a href="">Contact</a></li>
        </ul>
      </header>
      <nav id="blogV2-archives-nav">
        <a href="/study/ps.html" class="prev"><i class="icon icon-circle-arrow-left"></i>Prev/前篇</a>
        <a href="/summary/rn-write-high-quality-code.html" class="next">Next/后篇<i class="icon icon-circle-arrow-right"></i></a>
      </nav>
      <section id="archives-post">
        <h2 class="post-title">this的用法整理
          <time class="push-time">2013/10/21</time>
        </h2>
        <article class="post-content">
          <p>今天在复习<a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html">闭包</a>的相关知识的时候 发现自己对this的理解有不小的偏差 所以找来<a href="http://www.quirksmode.org/js/this.html">这篇</a>（也有Chinese Edition啦）看一看 这篇blog就作为"this"的笔记吧 算是一边学一边翻译啦</p>
          <p class="explain">JavaScript中<strong>this</strong>总是指向正在执行的函数的所有者，或者指向将这个函数作为方法来调用的对象。我们在当前页面定义了doSomething()，那么doSomething()的所有者就是当前的页面，或者说是JavaScript的<strong>window</strong>对象(global object)。</p>
          <pre>
function doSomething() {
   this.style.color = '#c00';
}
          </pre>
          <p class="explain"><strong>#传统事件注册#</strong>
          <p>这个函数是直接定义在js中的，如果以function()的方式直接调用doSomething(),那么this就是指window，由于window没有style.color这个属性，call的结果就是报错。如果是以<code>element.onclick = doSomething()</code>的方式调用doSomething()，那么this指的就是指element，此时doSomething()会产生一个copy，element实际上调用的是这个copy，原始的doSomething()在内存中，并没有被调用。这样以后可以有很多的elements来call doSomething()，就会产生copies。每次调用的时候this都是指向当前调用它的元素。</p>
          <p class="explain"><strong>#行内事件注册#</strong>
          <p>如下就是行内事件注册，html和js没有分离<code><element onclick='doSomething()'></code>这就不是对doSomething()的copy，而是直接指向doSomething()这个函数，即调用了这个函数，而没有实际等于这个函数。它的意思就是“到doSomething()中去执行它”，所以实际上执行的doSomething()函数就是原始的函数，所以this在这里指的就是window。</p>
        </article>
        <arcticle class="post-content">
          <ol class="ordered-list">
            <li>
              <h3 class="post-content-title"><i class="icon-num">1.</i>以下的this指向element/ copy了doSomething()</h3>
              <pre>element.onclick = doSomething()</pre>
              <pre>element.addEventListener('click',doSomething,false)</pre>
              <pre>element.onclick = function () {this.style.color = '#cc0000';}</pre>
              <pre>&lt;element onclick="this.style.color = '#cc0000';"&gt;</pre>
              <pre>&lt;element onclick="doSomething(this)"&gt;
function doSomething(obj) {
   obj.style.color = '#cc0000';
}</pre>
            </li>
            <li>
              <h3 class="post-content-title"><i class="icon-num">2.</i>以下的this指向window</h3>
              <pre>element.onclick = function () {doSomething()}</pre>
              <pre>element.attachEvent('onclick',doSomething)</pre>
              <pre>&lt;element onclick="doSomething()"&gt;</pre>
            </li>
          </ol>
        </arcticle>
      </section>
    </section>
  </body>
</html>