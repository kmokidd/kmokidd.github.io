---
layout: post
title:  "module.exports vs exports"
date:   2015-12-06 
categories: study
---

é‡æ–°æ¿€æ´»è¿™é‡Œï¼Œç°åœ¨è¦è¿›è¡Œä¸€ä¸ª 21-day-push planï¼Œæ‰€ä»¥ä¼°è®¡ä¼šå¾ˆç»å¸¸æ›´æ–°è¿™é‡Œï¼Œä¹Ÿå‡†å¤‡æŠŠåšå®¢è¿ç§»åˆ°ä¸€ä¸ª amazon çš„æœåŠ¡å™¨ä¸Šï¼ŒæŠ˜è…¾ä¸€ä¸‹åå° nodejsã€python æˆ–è€… ruby or whateverã€‚



è¿™äº›éƒ½æ˜¯åè¯ï¼Œè¿™ç¯‡è¦è®°å½•ä¸€ä¸‹ nodejs old topicï¼šmodule.exports å’Œ exports çš„åŒºåˆ«ã€‚



##### å¦‚æœæƒ³ç›´æ¥çŸ¥é“æˆ‘çš„ç»“è®ºï¼Œçœ‹è¿™ä¸€æ®µå°±å¯ä»¥äº†

1. å¦‚æœæƒ³è¦æš´éœ²**ä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ª**å¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ ```module.exports = ä½ çš„å¯¹è±¡å```
2. å¦‚æœæƒ³è¦æš´éœ²çš„æ˜¯å„ç§æ–¹æ³•ï¼Œé‚£ä¹ˆä½¿ç”¨ ```exports.æ–¹æ³•å ï¼ ä½ çš„æ–¹æ³•å```
3. å¦‚æœå·²ç»ä½¿ç”¨äº† ```module.exports = xxx```ï¼Œé‚£ä¹ˆæ˜¯æ²¡æœ‰åŠæ³•å†ä½¿ç”¨ ```exports.xxx=xxx``` çš„

##### å¥½çš„ï¼Œç°åœ¨æ¥è§£é‡Š

é¦–å…ˆ[è¿™ç¯‡æ–‡ç« ä¸­](http://www.hacksparrow.com/node-js-exports-vs-module-exports.html)è¯´äº†ä¸€ä¸ªè§‚ç‚¹ï¼š

> If you want your module to be of a specific object type, use module.exports; if you want your module to be a typical module instance, use exports.

è¿™ä¸ªæ„æ€å‘¢ï¼Œå°±æ˜¯è¯´å¦‚æœæƒ³è¦åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ objectï¼Œæ¢å¥è¯è¯´å°±æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç±»å‹ï¼ˆç±»ä¼¼äº c çš„structï¼‰ï¼Œé‚£ä¹ˆåº”è¯¥ç”¨ ```module.exports```ï¼›å¦‚æœæ˜¯æƒ³æä¾›ä¸€ä¸ªæ¨¡å—å®ä¾‹ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ ```exports```ã€‚

è®²çœŸï¼Œå¯¹äº``` exports``` çš„ä½¿ç”¨æˆ‘è¿˜æ˜¯æ‘¸ä¸ç€å¤´è„‘ï¼Œä½†æ˜¯å¥½æ­¹ ```module.exports``` çš„ç”¨æ³•æˆ‘ç®—æ˜¯æ˜ç™½äº†ï¼Œçœ‹äº† npm ä¸Šä¸€äº› lib çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥å‘ç°å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¤§å®¶ç”¨çš„è¿˜æ˜¯ ```module.exports```ã€‚

```module.exports``` çš„ç”¨æ³•å…¶å®æ˜¯åœ¨æ¨¡å—å†…éƒ¨ç”¨åŸå‹é“¾å®ç°å¯¹è±¡çš„æ–¹æ³•çš„ã€‚è¿™æ ·åœ¨è°ƒç”¨å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡åŸå‹é“¾çš„æ–¹å¼ï¼Œè°ƒç”¨åˆ°å®ƒçš„æ–¹æ³•ã€‚okï¼Œè¿™è¾¹æ˜¯æˆ‘çš„ç†è®ºç†è§£ï¼Œæ˜å¤©è¦é‡å†™ä¸€ä¸‹ä»£ç éªŒè¯è¿™ä¸€ç‚¹ã€‚è€Œä¸”æƒ³è¦ç”¨ ES6 çš„æ–¹æ³•é‡å†™å®ƒã€‚

```exports``` å…¶å®æ˜¯ ```module``` çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœ `module.exports` è¢«ä½¿ç”¨äº†ï¼Œé‚£ä¹ˆå†ä½¿ç”¨ `exports.xxx` çš„æ—¶å€™ï¼Œå°±ä¼šè¢«è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œè°ƒç”¨çš„è¿™æ ·çš„æ–¹æ³•ä¼šæŠ¥ `undefined` é”™è¯¯ã€‚

okï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸¤ä¸ªä¸œè¥¿ä¸èƒ½åŒæ—¶ä½¿ç”¨å•¦ã€‚

å¥½çš„ï¼Œå¦‚æœä¸€å®šè¦ä½¿ç”¨çš„è¯ï¼Œå°±è¿™ä¹ˆç”¨ï¼š

``` javascript
module.exports = {
  func1: function(){...},
  func2: function(){...}
};

// ä»¥ä¸Šç­‰ä»·äºğŸ‘‡
exports.func1 = function(){...};
exports.func2 = function(){....};
        
```



æˆ–è€…è¿™ä¹ˆä½¿ç”¨

``` javascript
// ç„¶è€Œæˆ‘å¹¶ä¸æ˜ç™½å¹²å˜›è¦è¿™ä¹ˆå†™ï¼Œç”¨ module.exports æˆ–è€… exports äºŒè€…ä¹‹ä¸€å°±å¥½å•¦
var exports = module.exports = {...};
```



å¦å¤–ï¼Œçœ‹ API ä¸­è¿˜æœ‰ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼š

`module.exports` ä¸èƒ½å†™åœ¨ `setTimeout` æˆ–è€… `setInterval` ä¹‹ç±»çš„é‡Œé¢ï¼Œæ¨¡å—çš„å¯¼å‡ºæ˜¯å³æ—¶çš„ã€‚

ç„¶åå®˜æ–¹è¯´äº†å¥ç‰¹åˆ«ç®€å•ç²—æš´ç›´ç™½å¥½æ‡‚çš„è¯ï¼š

> As a guideline, if the relationship between exports and module.exports seems like magic to you, ignore exports and only use module.exports.ï¼Œ
> 
> å¤§ç™½è¯å°±æ˜¯ï¼Œè¦æ˜¯ä½ ä¸çŸ¥é“è¦ç”¨å•¥ï¼Œé‚£å°±ç”¨ `moduel.exports`ã€‚[dogeç¬‘]

å¥½å§ï¼Œçªç„¶å‘ç°åšå®¢æ˜¯å¾ˆæœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œè®©æˆ‘çŸ¥é“äº†ï¼Œç‰¹ä¹ˆåŸæ¥è¿˜æœ‰è¿™ä¹ˆå¤šçŸ¥è¯†æ¼æ´è¦è¡¥ã€‚



[jekyll-docs]: http://jekyllrb.com/docs/home
[jekyll-gh]: https://github.com/jekyll/jekyll
[jekyll-talk]: https://talk.jekyllrb.com/